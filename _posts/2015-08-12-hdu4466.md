---
layout: post
title: Asia Regional Chengdu 2012 C Triangle
description: 坚持就是胜利，量变引发质变。
key: blog
---

###题目描述：

给你一条线段，可以分成多干段，每段组成一个三角形，统计有多少个三角形组满足组内三角形全部相似。

###思路：

 通过题目的例子可以发现，对于长度N，它的因子i，可以将它分成N/i份，然后对应产生的相似三角形组，就是一个隔板法求解的过程。

 例如9，它的因子3，这样的话我们得到了，就是相当于两个空挡，分别放入0个隔板，1个隔板，两个隔板，得到（3,3,3）、（1,1,1|2,2,2）、（2,2,2|1,1,1）和（1,1,1|1,1,1|1,1,1）三个相似三角形组。

 然后求和，就是2^(N/i-1)*F[i]。

 然后就是计算F[i]了。

 对于F[i]，我们可以先求出来任意一个长度N，可以组成的三角形的个数。

 然后利用类似筛素数的方法进行筛选，减掉三条边最大公约数不是1的情况。

 对于任意长度N，假设三边a,b,c满足a <= b <= c,那么对于b <= c有两种情况。

 第一种情况，b == c，这种情况下，个数是可以直接求出来的，利用a <= b = c,可以求出来b的上下界，个数为(N-1)/2 - (N+2)/3 + 1。

 第二种情况，b != c，这种情况下，就有b <= c-1，那么对于（a,b,c）就转化成了（a,b,c-1）的问题。这个就是F[N-1]，但是有一个问题需要注意，就是在F[N-1]中，a + b > c，而在N中，c+1有可能等于a+b，所以对于N为偶数的情况是，需要减掉这种情况。

 递推求出F[N]之后，就是筛法的过程了。筛法过程相当简单，对于任意(a,b,c)满足gcd(a,b,c) == 1的组合，(ka,kb,kc)这个三角形在答案k*(a+b+c)被计算过，所以只要相应地减掉就可以了。

###代码：

 <a href="http://paste.ubuntu.com/12061351/">点我查看~~</a>